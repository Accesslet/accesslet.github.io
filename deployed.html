<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>UI.js Lean Demo (Fixed Accordion v2 - Old Style + Spacing + Arrows)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <script>
  (function () {
    function sel(name) { return '[data-ui="' + name + '"]'; }
    function queryAll(name, root) { return (root || document).querySelectorAll(sel(name)); }

    const UI = {
      register(name, initFn) { queryAll(name).forEach(initFn); }
    };
    window.UI = UI;

    // Inject lean base styles, including essential vars for dropdown feedback and modal close button/backdrop
    const style = document.createElement("style");
    style.textContent = `
      :root {
        /* Basic theme colors */
        --ui-color-primary: #007bff;
        --ui-color-bg: #fff;
        --ui-color-text: #212529;
        /* Basic metrics */
        --ui-radius: 4px;
        --ui-padding: 8px;
        --ui-font: system-ui, sans-serif;
        --ui-shadow: 0 2px 6px rgba(0,0,0,0.15);
        /* Dropdown specific variables for selection/focus */
        --dropdown-selected-bg: #dbeffd;
        --dropdown-selected-color: #003366;
        --dropdown-selected-check-color: #0066cc;
        --dropdown-hover-bg: #eee; /* Added for consistency */
      }
      /* Dark theme example - kept minimal */
      :root[data-theme="dark"] {
        --ui-color-bg: #222;
        --ui-color-text: #eee;
        --ui-color-primary: #66f;
        --dropdown-hover-bg: #444; /* Adjusted for dark theme */
      }

      body { 
          font-family: var(--ui-font); 
          color: var(--ui-color-text); 
          background: var(--ui-color-bg); 
          /* Ensure body can scroll if content is long */
          margin: 0; 
          padding: 20px;
          /* Keep default scroll behavior */
      }

      /* Accordion - Reverted to old style with header background change and added spacing */
      [data-ui="accordion"] {
          /* Optional: border around whole accordion */
           border: 1px solid #ddd;
           border-radius: var(--ui-radius);
           overflow: hidden; /* Contain the borders of items */
      }
      [data-ui="accordion"] > div { /* Accordion Item */
        border-bottom: 1px solid #ccc; /* Border between items */
        padding: 10px; /* Add space between items */
      }
      [data-ui="accordion"] > div:last-child { /* Remove border from last item and bottom margin */
          border-bottom: none;
          margin-bottom: 0;
      }
      [data-ui="accordion"] > div > :first-child { /* Accordion Header (first child) */
        padding: var(--ui-padding);
        cursor: pointer;
        background: var(--ui-color-text); /* Default background */
        border: none; /* Remove default button styles if it were a button */
        width: 100%; /* Take full width if header is a button */
        text-align: left; /* Left align text if header is a button */
        font-family: inherit; /* Inherit font */
        font-size: inherit; /* Inherit font size */
        /* Optional: Add hover effect */
        transition: background-color 0.15s;
        /* Add space for the arrow */
        position: relative;
		border-radius: 4px;
        padding-left: 30px; /* Make room for the arrow on the left */
      }
      [data-ui="accordion"] > div > :first-child:hover {
          background-color: var(--dropdown-selected-color); /* Light hover background */
      }
      /* Accordion Arrow */
      [data-ui="accordion"] > div > :first-child::before {
          content: "‚ñº"; /* Down arrow by default */
          position: absolute;
          left: 10px; /* Position it on the left */
          top: 50%; /* Vertically center */
          transform: translateY(-50%); /* Adjust for vertical centering */
      }
      [data-ui="accordion"] > div.active > :first-child::before {
          content: "‚ñ≤"; /* Up arrow when active */
          /* transform: rotate(180deg); /* Alternative: rotate the down arrow */
      }
      [data-ui="accordion"] > div > *:not(:first-child) { /* Accordion Content (everything after first child) */
          display: none; /* Hide content by default */
          padding: var(--ui-padding); /* Add padding to content */
      }
      [data-ui="accordion"] > div.active > *:not(:first-child) { /* Show content when active */
          display: block;
      }
      [data-ui="accordion"] > div.active > :first-child { /* Style active header - OLD STYLE */
        background: var(--ui-color-primary); /* Use ui color primary that is blue */
      }

      /* Modal Backdrop */
      .ui-modal-backdrop {
        position: fixed; /* Fixed relative to the viewport */
        top: 0;
        left: 0;
        width: 100vw; /* Full viewport width */
        height: 100vh; /* Full viewport height */
        background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black */
        z-index: 999; /* Lower than modal content */
        display: none; /* Hidden by default */
        /* Ensure it captures clicks and blocks interaction underneath */
        pointer-events: auto; 
      }
      .ui-modal-backdrop.open {
          display: block; /* Show when modal is open */
      }

      /* Modal Content */
      [data-ui="modal-content"] {
        display: none; /* Hidden by default */
        position: fixed; /* Fixed relative to the viewport */
        top: 50%; 
        left: 50%; 
        transform: translate(-50%, -50%); /* Center the modal */
        background: var(--ui-color-bg); 
        padding: 20px; 
        border-radius: var(--ui-radius); 
        box-shadow: var(--ui-shadow);
        z-index: 1000; /* Higher than backdrop */
        max-width: 90vw; 
        width: 400px; /* Or use a percentage */
        /* Ensure modal content is interactive */
        pointer-events: auto; 
        /* Optional: Add a max-height and overflow if content is very long */
        max-height: 80vh; 
        overflow-y: auto;
      }
      [data-ui="modal-content"].open { 
          display: block; /* Show when modal is open */
      }

      /* Modal Close Button */
      .ui-modal-close-btn {
        position: absolute; /* Positioned relative to the modal content */
        top: 5px; /* Position it near the top */
        right: 5px; /* Position it near the right edge */
        width: 24px; /* Set a fixed size */
        height: 24px;
        border-radius: 50%; /* Make it circular */
        border: 2px inset red; /* As requested */
        background: #000; /* Black background */
        outline-color: red; /* As requested */
        color: #f00; /* Red X */
        font-size: 16px; /* Adjust font size of the X */
        font-family: var(--ui-font); /* Match the general font */
        cursor: pointer; /* Show pointer cursor */
        display: flex; /* Use flexbox to center the X */
        align-items: center;
        justify-content: center;
        line-height: 1; /* Ensure the X is vertically centered */
        padding: 0; /* Remove default padding */
        z-index: 1001; /* Slightly higher z-index than modal content */
      }
      .ui-modal-close-btn:hover {
        opacity: 0.8; /* Slight hover effect */
      }

      /* Tooltip */
      [data-ui="tooltip"] { position: relative; cursor: help; }
      [data-ui="tooltip"]::after {
        content: attr(data-tip);
        position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%);
        background: #333; color: #fff; padding: 4px 8px; border-radius: var(--ui-radius);
        opacity: 0; transition: opacity 0.2s; pointer-events: none;
      }
      [data-ui="tooltip"]:hover::after, [data-ui="tooltip"]:focus::after { opacity: 1; }

      /* Dropdown (Uses CSS variables defined above) */
      [data-ui="dropdown"] { position: relative; display: inline-block; }
      [data-ui="dropdown-menu"] {
        display: none;
        position: absolute; background: var(--dropdown-bg, var(--ui-color-bg)); /* Falls back to theme bg */
        border: var(--dropdown-border, 1px solid #ccc); /* Falls back to gray */
        box-shadow: var(--dropdown-shadow, var(--ui-shadow));
        min-width: 160px; z-index: 1000;
      }
      [data-ui="dropdown"].open > [data-ui="dropdown-menu"] { display: block; }
      [data-ui="dropdown-menu"] > div {
        padding: var(--dropdown-item-padding, var(--ui-padding));
        cursor: pointer;
        outline: none; /* Reset default outline, rely on custom focus style */
      }
      [data-ui="dropdown-menu"] > div:focus {
        outline: 2px solid var(--ui-color-primary);
        outline-offset: 2px;
        background: var(--dropdown-hover-bg, #eee);
      }
      [data-ui="dropdown-menu"] > div:hover {
        background: var(--dropdown-hover-bg, #eee);
      }
      [data-ui="dropdown-menu"] > div.selected {
        background: var(--dropdown-selected-bg, #dbeffd);
        color: var(--dropdown-selected-color, #003366);
        font-weight: 600;
        position: relative;
      }
      [data-ui="dropdown-menu"] > div.selected::after {
        content: "‚úì";
        position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
        color: var(--dropdown-selected-check-color, #0066cc);
        font-size: 0.9em;
      }

      /* Tabs */
      [data-ui="tabs"] { display: flex; border-bottom: 1px solid #ccc; }
      [data-ui="tabs"] > div { padding: 8px 16px; cursor: pointer; }
      [data-ui="tabs"] > div.active { border-bottom: 2px solid var(--ui-color-primary); font-weight: bold; }
      [data-ui="tab-content"] { display: none; padding: 16px; }
      [data-ui="tab-content"].active { display: block; }

      /* Button */
      [data-ui="button"] {
        background: var(--ui-color-primary); color: #fff; padding: var(--ui-padding); border: none; border-radius: var(--ui-radius); cursor: pointer;
      }
      [data-ui="button"]:hover { background: #0056b3; } /* Or use a darker var calc */

      /* Carousel */
      [data-ui="carousel"] { position: relative; overflow: hidden; }
      [data-ui="carousel"] > div { display: none; }
      [data-ui="carousel"] > div.active { display: block; }
      [data-ui="carousel-controls"] { display: flex; gap: 8px; margin-top: 8px; }
    `;
    document.head.appendChild(style);

    // --- Component Initialization Functions (Lean versions where possible) ---

    // Updated Accordion: Toggles active class on parent item when header is clicked
    function initAccordion(acc) {
      acc.querySelectorAll("div").forEach(item => { // Iterate through each accordion item (the divs inside [data-ui="accordion"])
        const headerElement = item.querySelector(':first-child'); // Get the first child as the header

        if (headerElement) {
            headerElement.setAttribute("tabindex", "0"); // Make header focusable
            headerElement.addEventListener("click", () => {
                // Toggle the 'active' class on the parent item container
                const isActive = item.classList.toggle("active");
                // Update aria-expanded on the header element
                headerElement.setAttribute("aria-expanded", isActive ? "true" : "false");
            });
            headerElement.addEventListener("keydown", e => {
                if (e.key === "Enter" || e.key === " ") {
                    e.preventDefault(); // Prevent page scroll on Space
                    headerElement.click(); // Trigger click handler
                }
            });

             // Initialize aria-expanded based on initial state
             const initialActive = item.classList.contains("active");
             headerElement.setAttribute("aria-expanded", initialActive ? "true" : "false");

             // Initialize aria-hidden on content elements based on initial state
             const contentElements = item.querySelectorAll('*:not(:first-child)'); // Get all children except the first (header)
             contentElements.forEach(content => {
                 content.setAttribute("aria-hidden", initialActive ? "false" : "true");
             });

             // Update aria-hidden when item toggles
             const updateContentAria = () => {
                 const isItemActive = item.classList.contains("active");
                 contentElements.forEach(content => {
                     content.setAttribute("aria-hidden", isItemActive ? "false" : "true");
                 });
             };
             // Run on click (bubbles up from header)
             item.addEventListener("click", updateContentAria);
        } else {
            console.warn('Accordion item lacks a header element (first child):', item);
        }
      });
    }


    // Updated Modal: Uses stored identifier to find its content
    function initModal(btn) {
      const contentId = btn.dataset.uiModalTarget; // Get the stored ID
      if (!contentId) {
          console.error('Modal button missing stored target ID:', btn);
          return;
      }
      const targetModal = document.querySelector(`[data-ui="modal-content"][data-ui-modal-id="${contentId}"]`); // Find content by stored ID

      btn.addEventListener("click", () => {
        if (targetModal) {
          targetModal.classList.add("open");
          targetModal.setAttribute("aria-hidden", "false");
          targetModal.focus();
          // Show the backdrop when modal opens
          const backdrop = document.querySelector('.ui-modal-backdrop');
          if (backdrop) {
              backdrop.classList.add('open');
          }
        } else {
             console.error('No modal content found for ID:', contentId, 'Trigger:', btn);
        }
      });
    }

    // Updated Modal Content: Adds close button and backdrop management
    function initModalContent(modal) {
      modal.setAttribute("role", "dialog");
      modal.setAttribute("aria-hidden", "true");
      modal.setAttribute("tabindex", "-1");

      // Create the close button element
      const closeBtn = document.createElement("button");
      closeBtn.className = "ui-modal-close-btn";
      closeBtn.setAttribute("aria-label", "Close modal");
      closeBtn.innerHTML = "&#x1D54F;"; // UTF-8 symbol ùïè

      // Append the close button to the modal content div
      modal.appendChild(closeBtn);

      // Create the backdrop element (only once, if it doesn't exist)
      let backdrop = document.querySelector('.ui-modal-backdrop');
      if (!backdrop) {
          backdrop = document.createElement("div");
          backdrop.className = "ui-modal-backdrop";
          // Append the backdrop to the body
          document.body.appendChild(backdrop);
      }


      // Function to close the modal
      function closeModal() {
          modal.classList.remove("open");
          modal.setAttribute("aria-hidden", "true");
          // Hide the backdrop when modal closes
          backdrop.classList.remove('open');
          // Scrolling remains enabled on body (no class to remove)
          // Optionally, return focus to the triggering button here
          // const trigger = document.querySelector(`[data-trigger-ref="${modal.getAttribute('data-modal-ref')}"]`);
          // if (trigger) trigger.focus();
      }

      // Attach event listeners to the close button
      closeBtn.addEventListener("click", closeModal);

      // Attach event listener for the Escape key
      modal.addEventListener("keydown", e => {
        if (e.key === "Escape") {
          closeModal();
        }
      });

      // Clicking the backdrop should also close the modal
      backdrop.addEventListener("click", closeModal);
    }

    function initTooltip(tip) {
      // Basic tooltip handled by CSS :hover/:focus
    }

    // --- FULL DROPDOWN IMPLEMENTATION (as provided by you) ---
    function initDropdown(drop) {
      const menu = drop.querySelector('[data-ui="dropdown-menu"]');
      const trigger = drop.querySelector('button') || drop; // Use button as trigger if present

      // ARIA setup
      if (trigger) {
        trigger.setAttribute('aria-haspopup', 'true');
        trigger.setAttribute('aria-expanded', 'false');
      }
      if (menu) {
        menu.setAttribute('role', 'menu');
        const menuItems = Array.from(menu.querySelectorAll('div'));
        menuItems.forEach(it => {
          it.setAttribute('role', 'menuitem');
          it.setAttribute('tabindex', '-1'); // not tabbable until opened
        });
      }

      function isOpen() { return drop.classList.contains('open'); }

      function clearSelection() {
        if (!menu) return;
        Array.from(menu.querySelectorAll('div.selected')).forEach(it => {
          it.classList.remove('selected');
          it.removeAttribute('aria-selected');
        });
      }

      // Make only the focused item tabbable, then focus it
      function focusItem(index) {
        if (!menu) return;
        const items = Array.from(menu.querySelectorAll('div'));
        if (!items.length) return;
        index = ((index % items.length) + items.length) % items.length; // normalize
        items.forEach((it, i) => it.setAttribute('tabindex', i === index ? '0' : '-1'));
        items[index].focus();
      }

      function openMenu({ focusFirst = false } = {}) {
        drop.classList.add('open');
        if (trigger) trigger.setAttribute('aria-expanded', 'true');
        if (menu) {
          const items = Array.from(menu.querySelectorAll('div'));
          items.forEach(it => it.setAttribute('tabindex', '-1'));
          if (focusFirst && items.length) focusItem(0);
        }
      }

      function closeMenu({ returnFocus = false } = {}) {
        drop.classList.remove('open');
        if (trigger) trigger.setAttribute('aria-expanded', 'false');
        if (menu) {
          Array.from(menu.querySelectorAll('div')).forEach(it => it.setAttribute('tabindex', '-1'));
        }
        if (returnFocus && trigger) trigger.focus();
      }

      // Mouse: toggle on trigger click (do not steal focus on open)
      if (trigger) {
        trigger.addEventListener('click', () => {
          if (isOpen()) closeMenu({ returnFocus: false });
          else openMenu({ focusFirst: false });
        });

        // Keyboard on trigger: open and focus first item
        trigger.addEventListener('keydown', (e) => {
          if ((e.key === 'Enter' || e.key === ' ' || e.key === 'ArrowDown') && !isOpen()) {
            e.preventDefault();
            openMenu({ focusFirst: true });
          }
        });
      }

      // Click on menu item: select and close without forcing focus back to trigger
      if (menu) {
        menu.addEventListener('click', (e) => {
          const item = e.target.closest('[data-ui="dropdown-menu"] > div');
          if (item && menu.contains(item)) {
            clearSelection();
            item.classList.add('selected');
            item.setAttribute('aria-selected', 'true');
            item.dispatchEvent(new CustomEvent('ui:select', {
              bubbles: true,
              detail: { value: item.textContent.trim(), element: item }
            }));
            closeMenu({ returnFocus: false });
          }
        });

        // Ensure keyboard focus styling is applied when items receive focus via JS
        menu.addEventListener('focusin', (e) => {
          const item = e.target.closest('[data-ui="dropdown-menu"] > div');
          if (item && menu.contains(item)) {
            const items = Array.from(menu.querySelectorAll('div'));
            const idx = items.indexOf(item);
            if (idx >= 0) focusItem(idx);
          }
        });
      }

      // Close when clicking outside (do not force focus)
      document.addEventListener('click', (e) => {
        if (!drop.contains(e.target) && isOpen()) closeMenu({ returnFocus: false });
      });

      // Keyboard navigation when menu is open
      drop.addEventListener('keydown', (e) => {
        if (!menu || !isOpen()) return;

        const items = Array.from(menu.querySelectorAll('div'));
        if (items.length === 0) return;

        let currentIndex = items.findIndex(it => it === document.activeElement);
        if (currentIndex < 0) currentIndex = -1;

        if (e.key === 'Escape') {
          e.preventDefault();
          closeMenu({ returnFocus: true });
          return;
        }

        if (e.key === 'Tab') {
          // allow natural tab flow; close menu and let browser move focus
          closeMenu({ returnFocus: false });
          return;
        }

        if (e.key === 'ArrowDown') {
          e.preventDefault();
          const nextIndex = (currentIndex === -1) ? 0 : (currentIndex + 1) % items.length;
          focusItem(nextIndex);
          return;
        }

        if (e.key === 'ArrowUp') {
          e.preventDefault();
          const prevIndex = (currentIndex === -1) ? (items.length - 1) : (currentIndex - 1 + items.length) % items.length;
          focusItem(prevIndex);
          return;
        }

        if (e.key === 'Home') {
          e.preventDefault();
          focusItem(0);
          return;
        }

        if (e.key === 'End') {
          e.preventDefault();
          focusItem(items.length - 1);
          return;
        }

        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          const current = document.activeElement;
          if (current && menu.contains(current)) {
            clearSelection();
            current.classList.add('selected');
            current.setAttribute('aria-selected', 'true');
            current.dispatchEvent(new CustomEvent('ui:select', {
              bubbles: true,
              detail: { value: current.textContent.trim(), element: current }
            }));
            closeMenu({ returnFocus: false });
          }
        }
      });

      // Ensure the trigger is tabbable if the trigger is the container itself
      if (trigger === drop && !trigger.hasAttribute('tabindex')) {
        drop.setAttribute('tabindex', '0');
      }
    }
    // --- END OF FULL DROPDOWN IMPLEMENTATION ---


    function initTabs(tabs) {
      const items = tabs.querySelectorAll("div");
      items.forEach((tab, idx) => {
        tab.setAttribute("role", "tab");
        tab.setAttribute("tabindex", "0");
        tab.addEventListener("click", () => {
          items.forEach(t => {
            t.classList.remove("active");
            t.setAttribute("aria-selected", "false");
          });
          tab.classList.add("active");
          tab.setAttribute("aria-selected", "true");
          const contents = document.querySelectorAll('[data-ui="tab-content"]');
          contents.forEach((c, i) => {
            c.classList.toggle("active", i === idx);
            c.setAttribute("aria-hidden", i === idx ? "false" : "true");
          });
        });
        tab.addEventListener("keydown", e => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            tab.click();
          }
           if (e.key === "ArrowRight") { (items[idx+1]||items[0]).focus(); }
           if (e.key === "ArrowLeft") { (items[idx-1]||items[items.length-1]).focus(); }
        });
      });
    }

    function initCarousel(el) {
      const slides = el.querySelectorAll("div");
      if (slides.length === 0) return; // Guard clause

      let index = 0;
      let autoInterval; // Store interval ID

      function showSlide(i) {
        slides.forEach((s, idx) => s.classList.toggle("active", idx === i));
      }

      // Initial display
      showSlide(index);

      // Create controls
      const controls = document.createElement("div");
      controls.setAttribute("data-ui", "carousel-controls");
      const prevBtn = document.createElement("button");
      prevBtn.type = "button";
      prevBtn.textContent = "Prev";
      prevBtn.setAttribute("aria-label", "Previous Slide");
      const nextBtn = document.createElement("button");
      nextBtn.type = "button";
      nextBtn.textContent = "Next";
      nextBtn.setAttribute("aria-label", "Next Slide");
      controls.appendChild(prevBtn);
      controls.appendChild(nextBtn);
      el.appendChild(controls);

      function nextSlide() {
        index = (index + 1) % slides.length;
        showSlide(index);
        // Reset the timer after changing the slide
        resetAutoTimer();
      }

      function prevSlide() {
        index = (index - 1 + slides.length) % slides.length;
        showSlide(index);
        // Reset the timer after changing the slide
        resetAutoTimer();
      }

      prevBtn.addEventListener("click", prevSlide);
      nextBtn.addEventListener("click", nextSlide);

      // Function to reset the auto-advance timer
      function resetAutoTimer() {
        if (autoInterval) {
          clearInterval(autoInterval);
        }
        // Start a new timer that advances after 2 seconds
        autoInterval = setInterval(nextSlide, 2000);
      }

      // Start the initial auto-advance timer
      resetAutoTimer();

      // Pause auto-advance on hover/focus
      el.addEventListener("mouseenter", () => {
         if (autoInterval) {
             clearInterval(autoInterval);
             autoInterval = null; // Indicate it's paused
         }
      });
      el.addEventListener("focusin", () => {
         if (autoInterval) {
             clearInterval(autoInterval);
             autoInterval = null;
         }
      });

      // Resume auto-advance on leave/blur ONLY if it was running before
      el.addEventListener("mouseleave", () => {
         if (autoInterval === null) { // Was paused
             resetAutoTimer(); // Restart the timer
         }
      });
      el.addEventListener("focusout", () => {
         if (autoInterval === null) { // Was paused
             resetAutoTimer(); // Restart the timer
         }
      });

      // Keyboard navigation - also resets the timer
      el.setAttribute("tabindex", "0");
      el.addEventListener("keydown", e => {
        if (e.key === "ArrowRight") {
          e.preventDefault(); // Prevent scrolling
          nextSlide();
        }
        if (e.key === "ArrowLeft") {
          e.preventDefault(); // Prevent scrolling
          prevSlide();
        }
      });
    }

    // --- Scan and Initialize ---
    function scan() {
      // Get NodeLists for modals and contents
      const modalTriggers = queryAll("modal");
      const modalContents = queryAll("modal-content");

      // Pair them based on index and add identifiers
      const numTriggers = modalTriggers.length;
      const numContents = modalContents.length;
      const pairCount = Math.min(numTriggers, numContents);

      for (let i = 0; i < pairCount; i++) {
          const trigger = modalTriggers[i];
          const content = modalContents[i];
          const id = `ui-modal-${i}`; // Generate unique ID based on index

          // Store the ID on the trigger and content elements
          trigger.dataset.uiModalTarget = id; // Use dataset for storage
          content.dataset.uiModalId = id;     // Use dataset for storage
      }

      // Initialize components using forEach
      modalTriggers.forEach(initModal); // Use the updated initModal
      modalContents.forEach(initModalContent); // Use the updated initModalContent
      queryAll("accordion").forEach(initAccordion); // Use the updated initAccordion
      queryAll("tooltip").forEach(initTooltip);
      queryAll("dropdown").forEach(initDropdown);
      queryAll("tabs").forEach(initTabs);
      queryAll("carousel").forEach(initCarousel);
    }

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", scan);
    } else {
      scan();
    }

    // Example of registering an external component after DOM ready
    document.addEventListener("DOMContentLoaded", () => {
        UI.register("external-component", function (el) {
            console.log("Initializing external component:", el);
        });
    });

  })();
  </script>
</head>
<body>
  <h1>UI.js Lean Components Demo (Fixed Accordion v2 - Old Style + Spacing + Arrows)</h1>

  <h2>Accordion</h2>
  <div data-ui="accordion">
    <div>
        <strong>Section 1 Header</strong>
        <p>Some detailed content for section 1...</p>
        <p>More content for section 1.</p>
    </div>
    <div>
        <strong>Section 2 Header</strong>
        <p>Some detailed content for section 2...</p>
        <ul>
            <li>List item 1</li>
            <li>List item 2</li>
        </ul>
    </div>
    <div>
        <strong>Section 3 Header</strong>
        <p>Some detailed content for section 3...</p>
        <button>A button inside the accordion content</button>
    </div>
  </div>

  <h2>Modal 1</h2>
  <button data-ui="modal">Open Modal 1</button> <!-- No manual ref needed -->
  <div data-ui="modal-content"> <!-- No manual ref needed -->
    <p>This is inside Modal 1. Use the close button (ùïè), click the backdrop, or press Escape to close.</p>
    <p><button>A button inside the modal</button></p>
    <p>Long content to test scrolling inside the modal if needed...</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
    <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
    <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
    <p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
  </div>
  

  <h2>Modal 2</h2>
  <button data-ui="modal">Open Modal 2</button>
  <div data-ui="modal-content">
    <p>This is inside Modal 2. Use the close button (ùïè), click the backdrop, or press Escape to close.</p>
    <p>Page scrolling remains enabled while this modal is open.</p>
  </div>

  <h2>Tooltip</h2>
  <span data-ui="tooltip" data-tip="This is a helpful tooltip!">Hover or focus me</span>

  <h2>Dropdown (Full Featured)</h2>
  <div data-ui="dropdown">
    <button>Choose Option</button>
    <div data-ui="dropdown-menu">
      <div>Option 1</div>
      <div>Option 2</div>
      <div>Option 3</div>
      <div>Option 4</div>
    </div>
  </div>

  <h2>Tabs</h2>
  <div data-ui="tabs">
    <div class="active">Tab 1</div>
    <div>Tab 2</div>
    <div>Tab 3</div>
  </div>
  <div data-ui="tab-content" class="active">Content for Tab 1</div>
  <div data-ui="tab-content">Content for Tab 2</div>
  <div data-ui="tab-content">Content for Tab 3</div>

  <h2>Carousel</h2>
  <div data-ui="carousel" style="max-width: 420px; border: 1px solid #ddd; padding: 12px;">
    <div style="padding: 20px; background: #f7f7f7; text-align: center;">Slide 1 Content</div>
    <div style="padding: 20px; background: #eef; text-align: center;">Slide 2 Content</div>
    <div style="padding: 20px; background: #efe; text-align: center;">Slide 3 Content</div>
  </div>

</body>
</html>